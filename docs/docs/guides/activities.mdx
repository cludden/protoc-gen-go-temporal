import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Activities

## Implementation

Activities are implemented as methods on a Go `struct` that satisfies the generated `<Service>Activities` interface type generated by this plugin

<Tabs>
<TabItem value="implementation-go" label="Go">
```go title="main.go"
package main

import (
    "context"

    examplev1 "path/to/gen/example/v1"
    "go.temporal.io/sdk/activity"
)

type Activities struct {}

func (a *Activities) Execute(ctx context.Context, input *examplev1.HelloInput) (*examplev1.HelloOutput, error) {
    activity.GetLogger(ctx).Info("executing hello activity", "input", input)
    return &examplev1.HelloOutput{}, nil
}

// type assertion for illustrative purposes
var _ examplev1.ExampleActivities = (*Activities)(nil)
```
</TabItem>
<TabItem value="implementation-schema" label="Schema">
```protobuf title="example.proto"
syntax="proto3";

package example.v1;

import "temporal/v1/temporal.proto";

service Example {
  // Hello returns a friendly greeting
  rpc Hello(HelloInput) returns (HelloOutput) {
    option (temporal.v1.activity) = {
      start_to_close_timeout: { seconds: 60 }
    };
  }
}
```
</TabItem>
</Tabs>


### Parameters

The signature of an activity method varies based on whether or not the activity definition specifies a non-empty input and/or output message type.

<Tabs>
<TabItem value="parameters-both" label="Input & Output Parameters">

Most activities should specify both an input and output message type, even if the type is empty. This to support the addition of fields to either the input or output (or both) in the future without needing to introduce a breaking change.

```protobuf title="example.proto"
syntax="proto3";

package example.v1;

import "temporal/v1/temporal.proto";

service Example {
  // Hello returns a friendly greeting
  rpc Hello(HelloInput) returns (HelloOutput) {
    option (temporal.v1.activity) = {
      start_to_close_timeout: { seconds: 60 }
    };
  }
}
```

```go title="main.go"
package main

import (
    "context"

    examplev1 "path/to/gen/example/v1"
)

type Activities struct {}

func (a *Activities) Hello(ctx context.Context, input *examplev1.HelloInput) (*examplev1.HelloOutput, error) {
    return &examplev1.HelloOutput{}, nil
}
```

</TabItem>
<TabItem value="parameters-input" label="No Output Parameter">

An Activity output can be omitted using the native [google.protobuf.Empty](https://protobuf.dev/reference/protobuf/google.protobuf/#empty) type. This modifies the signature of the Activity method to have a single return value of type `error`. Note that this also requires an additional `google/protobuf/empty.proto` protobuf import statement.

```protobuf title="example.proto"
syntax="proto3";

package example.v1;

import "google/protobuf/empty.proto";
import "temporal/v1/temporal.proto";

service Example {
  // Hello returns a friendly greeting
  rpc Hello(HelloInput) returns (google.protobuf.Empty) {
    option (temporal.v1.activity) = {
      start_to_close_timeout: { seconds: 60 }
    };
  }
}
```

```go title="main.go"
package main

import (
    "context"

    examplev1 "path/to/gen/example/v1"
)

type Activities struct {}

func (a *Activities) Hello(ctx context.Context, input *examplev1.HelloInput) error {
    return nil
}
```

</TabItem>
<TabItem value="parameters-output" label="No Input Parameter">

An Activity input can be omitted using the native [google.protobuf.Empty](https://protobuf.dev/reference/protobuf/google.protobuf/#empty) type. This modifies the signature of the Activity method to have a single input argument of type `context.Context`. Note that this also requires an additional `google/protobuf/empty.proto` protobuf import statement.

```protobuf title="example.proto"
syntax="proto3";

package example.v1;

import "google/protobuf/empty.proto";
import "temporal/v1/temporal.proto";

service Example {
  // Hello returns a friendly greeting
  rpc Hello(google.protobuf.Empty) returns (HelloOutput) {
    option (temporal.v1.activity) = {
      start_to_close_timeout: { seconds: 60 }
    };
  }
}
```

```go title="main.go"
package main

import (
    "context"

    examplev1 "path/to/gen/example/v1"
)

type Activities struct {}

func (a *Activities) Hello(ctx context.Context) (*examplev1.HelloOutput, error) {
    return &examplev1.HelloOutput{}, nil
}
```

</TabItem>
<TabItem value="parameters-none" label="No Parameters">

An Activity can omit both input and output parameters using the native [google.protobuf.Empty](https://protobuf.dev/reference/protobuf/google.protobuf/#empty) type. This modifies the signature of the Activity method to accept a single argument of type `context.Context` and return a single value of type `error`. Note that this also requires an additional `google/protobuf/empty.proto` protobuf import statement.

```protobuf title="example.proto"
syntax="proto3";

package example.v1;

import "google/protobuf/empty.proto";
import "temporal/v1/temporal.proto";

service Example {
  // Hello returns a friendly greeting
  rpc Hello(google.protobuf.Empty) returns (google.protobuf.Empty) {
    option (temporal.v1.activity) = {
      start_to_close_timeout: { seconds: 60 }
    };
  }
}
```

```go title="main.go"
package main

import (
    "context"

    examplev1 "path/to/gen/example/v1"
)

type Activities struct {}

func (a *Activities) Hello(ctx context.Context) error {
    return nil
}
```

</TabItem>
</Tabs>

## Registration

This plugin generates helpers for registering your activities with a Temporal worker.

<Tabs>
<TabItem value="registration-go" label="Go">
```go title="main.go"
package main

import (
    "context"

    examplev1 "path/to/gen/example/v1"
    "go.temporal.io/sdk/client"
    "go.temporal.io/sdk/worker"
)

type Activities struct {}

func (a *Activities) Hello(ctx context.Context, input *examplev1.HelloInput) (*examplev1.HelloOutput, error) {
    return &examplev1.HelloOutput{}, nil
}

func main() {
    // initialize temporal client and worker
    c, err := client.Dial(client.Options{})
    if err != nil {
        log.Fatalf("error initializing client: %v", err)
    }
    w := worker.New(c, examplev1.ExampleTaskQueue, worker.Options{})

    // Register all example.v1.Example activities with the worker
    examplev1.RegisterExampleActivities(w, &Activities{})
    w.Run(worker.InterruptCh())
}
```

</TabItem>
<TabItem value="registration-schema" label="Schema">
```protobuf title="example.proto"
syntax="proto3";

package example.v1;

import "temporal/v1/temporal.proto";

service Example {
  option (temporal.v1.service) = {
    task_queue: "example-v1"
  };

  // Hello returns a friendly greeting
  rpc Hello(HelloInput) returns (HelloOutput) {
    option (temporal.v1.activity) = {
      start_to_close_timeout: { seconds: 60 }
    };
  }
}
```
</TabItem>
</Tabs>


